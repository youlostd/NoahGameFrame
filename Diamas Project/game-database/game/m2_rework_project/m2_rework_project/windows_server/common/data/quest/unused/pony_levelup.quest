quest pony_levelup begin
	state training_frame_red_step9 begin
		when letter begin
			target.pos("__TARGET__", 200, 700, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step8 begin
		when letter begin
			target.pos("__TARGET__", 180, 520, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_red_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step7 begin
		when letter begin
			target.pos("__TARGET__", 500, 500, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_red_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step6 begin
		when letter begin
			target.pos("__TARGET__", 610, 400, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_red_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step5 begin
		when letter begin
			target.pos("__TARGET__", 960, 545, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step4 begin
		when letter begin
			target.pos("__TARGET__", 940, 390, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_red_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step3 begin
		when letter begin
			target.pos("__TARGET__", 650, 270, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_red_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step2 begin
		when letter begin
			target.pos("__TARGET__", 380, 240, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_red_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_red_step1 begin
		when letter begin
			target.pos("__TARGET__", 140, 270, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 100)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 100)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 100)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 100)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_red_step2)
		end
	end
	state training_frame_blue_step9 begin
		when letter begin
			target.pos("__TARGET__", 100, 100, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step8 begin
		when letter begin
			target.pos("__TARGET__", 1430, 135, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_blue_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step7 begin
		when letter begin
			target.pos("__TARGET__", 1235, 310, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_blue_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step6 begin
		when letter begin
			target.pos("__TARGET__", 390, 580, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_blue_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step5 begin
		when letter begin
			target.pos("__TARGET__", 1100, 450, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step4 begin
		when letter begin
			target.pos("__TARGET__", 940, 390, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_blue_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step3 begin
		when letter begin
			target.pos("__TARGET__", 650, 270, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_blue_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step2 begin
		when letter begin
			target.pos("__TARGET__", 380, 240, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_blue_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_blue_step1 begin
		when letter begin
			target.pos("__TARGET__", 140, 270, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 100)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 100)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 100)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 100)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_blue_step2)
		end
	end
	state training_frame_yellow_step9 begin
		when letter begin
			target.pos("__TARGET__", 200, 700, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step8 begin
		when letter begin
			target.pos("__TARGET__", 70, 740, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_yellow_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step7 begin
		when letter begin
			target.pos("__TARGET__", 110, 1200, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_yellow_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step6 begin
		when letter begin
			target.pos("__TARGET__", 500, 1200, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_yellow_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step5 begin
		when letter begin
			target.pos("__TARGET__", 500, 910, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step4 begin
		when letter begin
			target.pos("__TARGET__", 510, 665, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_yellow_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step3 begin
		when letter begin
			target.pos("__TARGET__", 690, 870, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_yellow_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step2 begin
		when letter begin
			target.pos("__TARGET__", 900, 840, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_yellow_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_yellow_step1 begin
		when letter begin
			target.pos("__TARGET__", 1250, 690, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._310_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 1430, 750)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 1430, 750)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._310_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 1430, 750)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 1430, 750)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_yellow_step2)
		end
	end
	state training_frame_purple_step9 begin
		when letter begin
			target.pos("__TARGET__", 1430, 750, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step8 begin
		when letter begin
			target.pos("__TARGET__", 450, 700, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_purple_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step7 begin
		when letter begin
			target.pos("__TARGET__", 420, 1030, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_purple_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step6 begin
		when letter begin
			target.pos("__TARGET__", 100, 520, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_purple_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step5 begin
		when letter begin
			target.pos("__TARGET__", 490, 560, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step4 begin
		when letter begin
			target.pos("__TARGET__", 510, 665, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_purple_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step3 begin
		when letter begin
			target.pos("__TARGET__", 690, 870 , 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_purple_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step2 begin
		when letter begin
			target.pos("__TARGET__", 900, 840, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_purple_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_purple_step1 begin
		when letter begin
			target.pos("__TARGET__", 1250, 690, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 1430, 750)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 1430, 750)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 1430, 750)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 1430, 750)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_purple_step2)
		end
	end
	state training_frame_white_step9 begin
		when letter begin
			target.pos("__TARGET__", 200, 700, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step8 begin
		when letter begin
			target.pos("__TARGET__", 80, 950, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_white_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step7 begin
		when letter begin
			target.pos("__TARGET__", 180, 1200, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_white_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step6 begin
		when letter begin
			target.pos("__TARGET__", 500, 1000, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_white_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step5 begin
		when letter begin
			target.pos("__TARGET__", 800, 1200, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step4 begin
		when letter begin
			target.pos("__TARGET__", 1010, 1150, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._320_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_white_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step3 begin
		when letter begin
			target.pos("__TARGET__", 1000, 1300, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_white_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step2 begin
		when letter begin
			target.pos("__TARGET__", 710, 1380, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_white_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_white_step1 begin
		when letter begin
			target.pos("__TARGET__", 515, 1455, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 1400)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 1400)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 1400)
				elseif 2==b then
					say(gameforge.pony_levelup._330_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 1400)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_white_step2)
		end
	end
	state training_frame_sky_step9 begin
		when letter begin
			target.pos("__TARGET__", 100, 1400, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step8 begin
		when letter begin
			target.pos("__TARGET__", 485, 1315, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_frame_sky_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step7 begin
		when letter begin
			target.pos("__TARGET__", 1430, 1400, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_frame_sky_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step6 begin
		when letter begin
			target.pos("__TARGET__", 1400, 1200, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_frame_sky_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step5 begin
		when letter begin
			target.pos("__TARGET__", 1230, 1080, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step4 begin
		when letter begin
			target.pos("__TARGET__", 1010, 1150, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_frame_sky_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step3 begin
		when letter begin
			target.pos("__TARGET__", 1000, 1300, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_frame_sky_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step2 begin
		when letter begin
			target.pos("__TARGET__", 710, 1380, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_frame_sky_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_frame_sky_step1 begin
		when letter begin
			target.pos("__TARGET__", 515, 1455, 62, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 1400)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 1400)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=62 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(62, 100, 1400)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(62, 100, 1400)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_frame_sky_step2)
		end
	end
	state training_desert_red_step4 begin
		when letter begin
			target.pos("__TARGET__", 903, 670, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_red_step3 begin
		when letter begin
			target.pos("__TARGET__", 680, 700, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_desert_red_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_red_step2 begin
		when letter begin
			target.pos("__TARGET__", 410, 690, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_red_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_red_step1 begin
		when letter begin
			target.pos("__TARGET__", 480, 1020, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 430, 1200)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 430, 1200)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_red_step2)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_blue_step3 begin
		when letter begin
			target.pos("__TARGET__", 1400, 1400, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_blue_step2 begin
		when letter begin
			target.pos("__TARGET__", 1350, 1100, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_blue_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_blue_step1 begin
		when letter begin
			target.pos("__TARGET__", 1200, 1200, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 1200, 830)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 1200, 830)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_blue_step2)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step6 begin
		when letter begin
			target.pos("__TARGET__", 930, 670, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step5 begin
		when letter begin
			target.pos("__TARGET__", 680, 700, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step4 begin
		when letter begin
			target.pos("__TARGET__", 680, 560, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_desert_yellow_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step3 begin
		when letter begin
			target.pos("__TARGET__", 710, 380, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_desert_yellow_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step2 begin
		when letter begin
			target.pos("__TARGET__", 1140, 510, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_yellow_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_yellow_step1 begin
		when letter begin
			target.pos("__TARGET__", 1130, 930, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 950, 830)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 950, 830)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_yellow_step2)
		end
	end
	state training_desert_purple_step4 begin
		when letter begin
			target.pos("__TARGET__", 410, 690, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_purple_step3 begin
		when letter begin
			target.pos("__TARGET__", 500, 500, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_desert_purple_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_purple_step2 begin
		when letter begin
			target.pos("__TARGET__", 330, 320, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_purple_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_purple_step1 begin
		when letter begin
			target.pos("__TARGET__", 140, 420, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 170, 980)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 170, 980)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 170, 980)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 170, 980)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_purple_step2)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_white_step4 begin
		when letter begin
			target.pos("__TARGET__", 930, 670, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_white_step3 begin
		when letter begin
			target.pos("__TARGET__", 920, 440, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_desert_white_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_white_step2 begin
		when letter begin
			target.pos("__TARGET__", 1140, 510, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_white_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_white_step1 begin
		when letter begin
			target.pos("__TARGET__", 1190, 900, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 860, 1200)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 860, 1200)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 860, 1200)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 860, 1200)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_white_step2)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_sky_step3 begin
		when letter begin
			target.pos("__TARGET__", 170, 980, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_sky_step2 begin
		when letter begin
			target.pos("__TARGET__", 410, 690, 63, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_desert_sky_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_desert_sky_step1 begin
		when letter begin
			target.pos("__TARGET__", 480, 1020, 63, "")
		end
		when letter begin
			send_letter(gameforge.pony_levelup._250_makequestbutton)
		end
		when button or info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=63 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(63, 430, 1200)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(63, 430, 1200)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_desert_sky_step2)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step9 begin
		when letter begin
			target.pos("__TARGET__", 150, 740, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step8 begin
		when letter begin
			target.pos("__TARGET__", 380, 820, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_valley_red_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step7 begin
		when letter begin
			target.pos("__TARGET__", 380, 650, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_valley_red_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step6 begin
		when letter begin
			target.pos("__TARGET__", 720, 740, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_valley_red_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step5 begin
		when letter begin
			target.pos("__TARGET__", 800, 730, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step4 begin
		when letter begin
			target.pos("__TARGET__", 1030, 570, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_valley_red_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step3 begin
		when letter begin
			target.pos("__TARGET__", 720, 360, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_valley_red_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step2 begin
		when letter begin
			target.pos("__TARGET__", 380, 500, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_valley_red_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_red_step1 begin
		when letter begin
			target.pos("__TARGET__", 380, 820, 64, "")

			if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 150, 740)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 150, 740)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 150, 740)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 150, 740)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 150, 740)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 150, 740)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_valley_red_step2)
		end
	end
	state training_valley_blue_step9 begin
		when letter begin
			target.pos("__TARGET__", 1460, 80, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._340_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step8 begin
		when letter begin
			target.pos("__TARGET__", 1090, 510, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_valley_blue_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step7 begin
		when letter begin
			target.pos("__TARGET__", 770, 810, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_valley_blue_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step6 begin
		when letter begin
			target.pos("__TARGET__", 780, 1080, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_valley_blue_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step5 begin
		when letter begin
			target.pos("__TARGET__", 940, 1110, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step4 begin
		when letter begin
			target.pos("__TARGET__", 1060, 930, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_valley_blue_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step3 begin
		when letter begin
			target.pos("__TARGET__", 1190, 700, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_valley_blue_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step2 begin
		when letter begin
			target.pos("__TARGET__", 1390, 570, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_valley_blue_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_blue_step1 begin
		when letter begin
			target.pos("__TARGET__", 1230, 500, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 1460, 80)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 1460, 80)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 1460, 80)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 1460, 80)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_valley_blue_step2)
		end
	end
	state training_valley_yellow_step9 begin
		when letter begin
			target.pos("__TARGET__", 650, 1420, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step8 begin
		when letter begin
			target.pos("__TARGET__", 970, 1080, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_valley_yellow_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step7 begin
		when letter begin
			target.pos("__TARGET__", 780, 1080, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_valley_yellow_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step6 begin
		when letter begin
			target.pos("__TARGET__", 710, 730, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_valley_yellow_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step5 begin
		when letter begin
			target.pos("__TARGET__", 1090, 510, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step4 begin
		when letter begin
			target.pos("__TARGET__", 1300, 500, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_valley_yellow_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step3 begin
		when letter begin
			target.pos("__TARGET__", 1350, 640, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_valley_yellow_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step2 begin
		when letter begin
			target.pos("__TARGET__", 1340, 1140, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_valley_yellow_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_valley_yellow_step1 begin
		when letter begin
			target.pos("__TARGET__", 970, 1080, 64, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 650, 1420)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 650, 1420)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=64 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(64, 650, 1420)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(64, 650, 1420)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_valley_yellow_step2)
		end
	end
	state training_snow_red_step9 begin
		when letter begin
			target.pos("__TARGET__", 160, 270, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step8 begin
		when letter begin
			target.pos("__TARGET__", 170, 620, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_snow_red_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step7 begin
		when letter begin
			target.pos("__TARGET__", 580, 350, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_snow_red_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step6 begin
		when letter begin
			target.pos("__TARGET__", 760, 610, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_snow_red_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step5 begin
		when letter begin
			target.pos("__TARGET__", 790, 810, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step4 begin
		when letter begin
			target.pos("__TARGET__", 670, 820, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_snow_red_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step3 begin
		when letter begin
			target.pos("__TARGET__", 760, 610, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_snow_red_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step2 begin
		when letter begin
			target.pos("__TARGET__", 580, 350, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_snow_red_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_red_step1 begin
		when letter begin
			target.pos("__TARGET__", 170, 620, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 160, 270)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 160, 270)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._350_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 160, 270)
				elseif 2==b then
					say(gameforge.pony_levelup._360_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 160, 270)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_snow_red_step2)
		end
	end
	state training_snow_blue_step9 begin
		when letter begin
			target.pos("__TARGET__", 1380, 160, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step8 begin
		when letter begin
			target.pos("__TARGET__", 1240, 290, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_snow_blue_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step7 begin
		when letter begin
			target.pos("__TARGET__", 1330, 540, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_snow_blue_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step6 begin
		when letter begin
			target.pos("__TARGET__", 950, 470, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_snow_blue_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step5 begin
		when letter begin
			target.pos("__TARGET__", 760, 610, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step4 begin
		when letter begin
			target.pos("__TARGET__", 810, 120, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_snow_blue_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step3 begin
		when letter begin
			target.pos("__TARGET__", 760, 610, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_snow_blue_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step2 begin
		when letter begin
			target.pos("__TARGET__", 1010, 180, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_snow_blue_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_blue_step1 begin
		when letter begin
			target.pos("__TARGET__", 1240, 290, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 1380, 160)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 1380, 160)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 1380, 160)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 1380, 160)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_snow_blue_step2)
		end
	end
	state training_snow_yellow_step9 begin
		when letter begin
			target.pos("__TARGET__", 760, 1380, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._10_makequestbutton)
			q.set_title(gameforge.pony_levelup._10_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._10_makequestbutton)
			say(gameforge.pony_levelup._20_sayReward)
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._10_makequestbutton)
						say_reward(gameforge.pony_levelup._30_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step8 begin
		when letter begin
			target.pos("__TARGET__", 390, 1160, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._40_makequestbutton)
			q.set_title(gameforge.pony_levelup._40_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._40_makequestbutton)
			say(gameforge.pony_levelup._50_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._40_makequestbutton)
						say_reward(gameforge.pony_levelup._60_sayReward)
						setstate(training_snow_yellow_step9)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step7 begin
		when letter begin
			target.pos("__TARGET__", 400, 1040, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._70_makequestbutton)
			q.set_title(gameforge.pony_levelup._70_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._70_makequestbutton)
			say(gameforge.pony_levelup._80_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._70_makequestbutton)
						say_reward(gameforge.pony_levelup._90_sayReward)
						setstate(training_snow_yellow_step8)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step6 begin
		when letter begin
			target.pos("__TARGET__", 660, 1030, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._100_makequestbutton)
			q.set_title(gameforge.pony_levelup._100_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._100_makequestbutton)
			say(gameforge.pony_levelup._110_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._100_makequestbutton)
						say_reward(gameforge.pony_levelup._120_sayReward)
						setstate(training_snow_yellow_step7)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step5 begin
		when letter begin
			target.pos("__TARGET__", 770, 640, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._130_makequestbutton)
			q.set_title(gameforge.pony_levelup._130_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._130_makequestbutton)
			say(gameforge.pony_levelup._140_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._130_makequestbutton)
						say_reward(gameforge.pony_levelup._150_sayReward)
						setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step4 begin
		when letter begin
			target.pos("__TARGET__", 660, 840, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._160_makequestbutton)
			q.set_title(gameforge.pony_levelup._160_makequestbutton)
			q.start()
		end
				when button or info begin
			say_title(gameforge.pony_levelup._160_makequestbutton)
			say(gameforge.pony_levelup._170_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._160_makequestbutton)
						say_reward(gameforge.pony_levelup._180_sayReward)
						setstate(training_snow_yellow_step5)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step3 begin
		when letter begin
			target.pos("__TARGET__", 660, 1030, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._190_makequestbutton)
			q.set_title(gameforge.pony_levelup._190_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._190_makequestbutton)
			say(gameforge.pony_levelup._200_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._190_makequestbutton)
						say_reward(gameforge.pony_levelup._210_sayReward)
						setstate(training_snow_yellow_step4)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step2 begin
		when letter begin
			target.pos("__TARGET__", 1100, 1080, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._220_makequestbutton)
			q.set_title(gameforge.pony_levelup._220_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._220_makequestbutton)
			say(gameforge.pony_levelup._230_sayReward)
		end
		when 22000.use or 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._220_makequestbutton)
						say_reward(gameforge.pony_levelup._240_sayReward)
						setstate(training_snow_yellow_step3)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training_snow_yellow_step1 begin
		when letter begin
			target.pos("__TARGET__", 940, 1320, 61, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._250_makequestbutton)
			q.set_title(gameforge.pony_levelup._250_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 760, 1380)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 760, 1380)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say(gameforge.pony_levelup._260_sayReward)
						if pc.get_map_index()!=61 then
				say(gameforge.pony_levelup._270_say)
				local b= select(gameforge.pony_levelup._280_select, gameforge.find_brother_article._170_select)
				if 1==b then
					pc.warp_local(61, 760, 1380)
				elseif 2==b then
					say(gameforge.pony_levelup._290_say)
					local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
					if 1==b then
						setstate(start)
						q.done()
					elseif 2==b then
						pc.warp_local(61, 760, 1380)
					else
						say(string.format(gameforge.buy_fishrod._80_say, b))
					end
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			end
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say_title(gameforge.pony_levelup._250_makequestbutton)
						say_reward(gameforge.pony_levelup._300_sayReward)
						setstate(training_snow_yellow_step2)
		end
	end
	state training1_normal1 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 586, 1139, 1, "")
			target.pos("target2", 260, 1172, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._370_makequestbutton)
			q.set_title(gameforge.pony_levelup._370_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_normal2 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 221, 821, 1, "")
			target.pos("target2", 305, 419, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_normal3 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 215, 176, 1, "")
			target.pos("target2", 838, 248, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_normal4 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 886, 728, 1, "")
			target.pos("target2", 601, 986, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.guild.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_normal1 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 287, 449, 21, "")
			target.pos("target2", 514, 209, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.guild.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_normal2 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 649, 377, 21, "")
			target.pos("target2", 883, 491, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_normal3 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 859, 824, 21, "")
			target.pos("target2", 670, 1025, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_normal4 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 212, 992, 21, "")
			target.pos("target2", 211, 488, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._370_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_normal1 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 200, 713, 41, "")
			target.pos("target2", 200, 356, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._370_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_normal2 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 176, 1061, 41, "")
			target.pos("target2", 422, 827, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._370_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_normal3 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 757, 869, 41, "")
			target.pos("target2", 772, 446, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_normal4 begin
		when letter begin
			pc.setqf("flag1", 0)
			pc.setqf("flag2", 0)
			target.pos("target1", 808, 314, 41, "")
			target.pos("target2", 206, 191, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._380_sayTitle)
			q.set_title(gameforge.pony_levelup._380_sayTitle)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._380_sayTitle)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when info begin
			say_title(gameforge.pony_levelup._370_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
						if pc.getqf("flag1")==1 then
				say(gameforge.pony_levelup._400_say)
			elseif pc.getqf("flag1")==0 then
				say(gameforge.pony_levelup._410_say)
			end
			if pc.getqf("flag2")==1 then
				say(gameforge.pony_levelup._420_say)
			elseif pc.getqf("flag2")==0 then
				say(gameforge.pony_levelup._430_say)
			end
						local b= select(gameforge.pony_levelup._280_select, gameforge.locale.cancel)
			if 1==b then
			elseif 2==b then
				say(gameforge.pony_levelup._440_say)
				local b= select(gameforge.locale.guild.yes, gameforge.locale.guild.no)
				if 1==b then
					setstate(start)
				elseif 2==b then
				else
					say(string.format(gameforge.buy_fishrod._80_say, b))
				end
			else
				say(string.format(gameforge.buy_fishrod._80_say, b))
			end
		end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when target1.target.arrive begin
			target.delete("target1")
			say(gameforge.pony_levelup._450_say)
			pc.setqf("flag1", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when target2.target.arrive begin
			target.delete("target2")
			say(gameforge.pony_levelup._460_say)
			pc.setqf("flag2", 1)
			if pc.getqf("flag1")==1 and pc.getqf("flag2")==1 then
				setstate(report)
			end
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_easy1 begin
		when letter begin
			target.pos("__TARGET__", 84, 602, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_easy2 begin
		when letter begin
			target.pos("__TARGET__", 591, 1166, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._490_makequestbutton)
			q.set_title(gameforge.pony_levelup._490_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_easy3 begin
		when letter begin
			target.pos("__TARGET__", 913, 1013, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training1_easy4 begin
		when letter begin
			target.pos("__TARGET__", 405, 73, 1, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_easy1 begin
		when letter begin
			target.pos("__TARGET__", 298, 638, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._490_makequestbutton)
			q.set_title(gameforge.pony_levelup._490_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._500_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_easy2 begin
		when letter begin
			target.pos("__TARGET__", 358, 1110, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_easy3 begin
		when letter begin
			target.pos("__TARGET__", 876, 1025, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training2_easy4 begin
		when letter begin
			target.pos("__TARGET__", 908, 87, 21, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_easy1 begin
		when letter begin
			target.pos("__TARGET__", 125, 1118, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._510_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_easy2 begin
		when letter begin
			target.pos("__TARGET__", 670, 1157, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_easy3 begin
		when letter begin
			target.pos("__TARGET__", 819, 315, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._490_makequestbutton)
			q.set_title(gameforge.pony_levelup._490_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._480_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state training3_easy4 begin
		when letter begin
			target.pos("__TARGET__", 137, 126, 41, "")
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._470_makequestbutton)
			q.set_title(gameforge.pony_levelup._470_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when info begin
			say_title(gameforge.pony_levelup._470_makequestbutton)
						say(gameforge.pony_levelup._390_sayReward)
					end
		when 22000.use begin
			setstate(failure)
		end
		when 22010.use begin
			setstate(failure)
		end
		when __TARGET__.target.arrive begin
			target.delete("__TARGET__")
			say(gameforge.pony_levelup._520_say)
			setstate(report)
		end
		when unmount begin
			setstate(failure)
		end
	end
	state start begin
		when 20349.chat.gameforge.horse_levelup._230_npcChat with horse.get_grade()==1 and (horse.get_level()>=1 and horse.get_level()<=10) begin
			if pc.countitem("50050")<1 then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._530_say)
				setstate(need_item50050)
			elseif get_time()<pc.getqf("next_time") then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._540_say)
			elseif horse.get_stamina_pct()<=10 then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._550_say)
			elseif horse.get_health_pct()<=10 then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._560_say)
			elseif horse.get_level()==10 then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._570_say)
			elseif horse.is_riding()==0 then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._580_say)
				elseif (horse.get_level()>=8 and horse.get_level()<=9) then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._590_say)
				if is_test_server() then
					pc.setqf("next_time", get_time()+10)
				else
					pc.setqf("next_time", get_time()+number(12, 24)*60*60)
				end
				if is_test_server() then
                                        local s=select("1 val(1) 12.50%","2 val(1) 12.50%","3 val(1) 12.50%","4 val(1) 12.50%","5 val(1) 12.50%","6 val(1) 12.50%","7 val(1) 12.50%","8 val(1) 12.50%")
					if 1==s then
						setstate(training_frame_red_step1)
					elseif 2==s then
						setstate(training_frame_blue_step1)
					elseif 3==s then
						setstate(training_frame_yellow_step1)
					elseif 4==s then
						setstate(training_frame_purple_step1)
					elseif 5==s then
						setstate(training_frame_white_step1)
					elseif 6==s then
						setstate(training_snow_red_step1)
					elseif 7==s then
						setstate(training_snow_blue_step1)
					elseif 8==s then
						setstate(training_snow_yellow_step1)
					end
				else
					local s=number(1, 8)
					if 1>=s then -- 12.50% (1/8)
						setstate(training_frame_red_step1)
					elseif 2>=s then -- 12.50% (1/8)
						setstate(training_frame_blue_step1)
					elseif 3>=s then -- 12.50% (1/8)
						setstate(training_frame_yellow_step1)
					elseif 4>=s then -- 12.50% (1/8)
						setstate(training_frame_purple_step1)
					elseif 5>=s then -- 12.50% (1/8)
						setstate(training_frame_white_step1)
					elseif 6>=s then -- 12.50% (1/8)
						setstate(training_snow_red_step1)
					elseif 7>=s then -- 12.50% (1/8)
						setstate(training_snow_blue_step1)
					elseif 8>=s then -- 12.50% (1/8)
						setstate(training_snow_yellow_step1)
					end
				end
			elseif (horse.get_level()>=6 and horse.get_level()<=7) then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._620_say)
				if is_test_server() then
					pc.setqf("next_time", get_time()+10)
				else
					pc.setqf("next_time", get_time()+number(12, 24)*60*60)
				end
				if is_test_server() then
                                        local s=select("1 choose(1) 11.11%","2 choose(1) 11.11%","3 choose(1) 11.11%","4 choose(1) 11.11%","5 choose(1) 11.11%","6 choose(1) 11.11%","7 choose(1) 11.11%","8 choose(1) 11.11%","9 choose(1) 11.11%")
					if 1==s then
						setstate(training_valley_red_step1)
					elseif 2==s then
						setstate(training_valley_blue_step1)
					elseif 3==s then
						setstate(training_valley_yellow_step1)
					elseif 4==s then
						setstate(training_desert_red_step1)
					elseif 5==s then
						setstate(training_desert_blue_step1)
					elseif 6==s then
						setstate(training_desert_yellow_step1)
					elseif 7==s then
						setstate(training_desert_purple_step1)
					elseif 8==s then
						setstate(training_desert_white_step1)
					elseif 9==s then
						setstate(training_desert_sky_step1)
					end
				else
					local s=number(1, 9)
					if 1>=s then -- 11.11% (1/9)
						setstate(training_valley_red_step1)
					elseif 2>=s then -- 11.11% (1/9)
						setstate(training_valley_blue_step1)
					elseif 3>=s then -- 11.11% (1/9)
						setstate(training_valley_yellow_step1)
					elseif 4>=s then -- 11.11% (1/9)
						setstate(training_desert_red_step1)
					elseif 5>=s then -- 11.11% (1/9)
						setstate(training_desert_blue_step1)
					elseif 6>=s then -- 11.11% (1/9)
						setstate(training_desert_yellow_step1)
					elseif 7>=s then -- 11.11% (1/9)
						setstate(training_desert_purple_step1)
					elseif 8>=s then -- 11.11% (1/9)
						setstate(training_desert_white_step1)
					elseif 9>=s then -- 11.11% (1/9)
						setstate(training_desert_sky_step1)
					end
				end
			elseif (horse.get_level()>=3 and horse.get_level()<=5) then
				
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._650_say)
				if is_test_server() then
					pc.setqf("next_time", get_time()+10)
				else
					pc.setqf("next_time", get_time()+number(12, 24)*60*60)
				end
				if pc.get_empire()==1 then
					if is_test_server() then
                                                local s=select("1 choose(1) 25.00%","2 choose(1) 25.00%","3 choose(1) 25.00%","4 choose(1) 25.00%")
						if 1==s then
							setstate(training1_normal1)
						elseif 2==s then
							setstate(training1_normal2)
						elseif 3==s then
							setstate(training1_normal3)
						elseif 4==s then
							setstate(training1_normal4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training1_normal1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training1_normal2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training1_normal3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training1_normal4)
						end
					end
				elseif pc.get_empire()==2 then
					if is_test_server() then
                                                local s=select("1 choose(1) 25.00%","2 choose(1) 25.00%","3 choose(1) 25.00%","4 choose(1) 25.00%")
						if 1==s then
							setstate(training2_normal1)
						elseif 2==s then
							setstate(training2_normal2)
						elseif 3==s then
							setstate(training2_normal3)
						elseif 4==s then
							setstate(training2_normal4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training2_normal1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training2_normal2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training2_normal3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training2_normal4)
						end
					end
				elseif pc.get_empire()==3 then
					if is_test_server() then
                                                local s=select("1 choose(1) 25.00%","2 choose(1) 25.00%","3 choose(1) 25.00%","4 choose(1) 25.00%")
						if 1==s then
							setstate(training3_normal1)
						elseif 2==s then
							setstate(training3_normal2)
						elseif 3==s then
							setstate(training3_normal3)
						elseif 4==s then
							setstate(training3_normal4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training3_normal1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training3_normal2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training3_normal3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training3_normal4)
						end
					end
				end
			elseif (horse.get_level()>=1 and horse.get_level()<=2) then
				say_title(gameforge.horse_exchange_ticket._20_sayTitle)
				say(gameforge.pony_levelup._680_say)
				if is_test_server() then
					pc.setqf("next_time", get_time()+10)
				else
					pc.setqf("next_time", get_time()+number(12, 24)*60*60)
				end
				if pc.get_empire()==1 then
					if is_test_server() then
                                                local s=select("1 val(1) 25.00%","2 val(1) 25.00%","3 val(1) 25.00%","4 val(1) 25.00%")
						if 1==s then
							setstate(training1_easy1)
						elseif 2==s then
							setstate(training1_easy2)
						elseif 3==s then
							setstate(training1_easy3)
						elseif 4==s then
							setstate(training1_easy4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training1_easy1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training1_easy2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training1_easy3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training1_easy4)
						end
					end
				elseif pc.get_empire()==2 then
					if is_test_server() then
                                                local s=select("1 val(1) 25.00%","2 val(1) 25.00%","3 val(1) 25.00%","4 val(1) 25.00%")
						if 1==s then
							setstate(training2_easy1)
						elseif 2==s then
							setstate(training2_easy2)
						elseif 3==s then
							setstate(training2_easy3)
						elseif 4==s then
							setstate(training2_easy4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training2_easy1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training2_easy2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training2_easy3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training2_easy4)
						end
					end
				elseif pc.get_empire()==3 then
					if is_test_server() then
                                                local s=select("1 val(1) 25.00%","2 val(1) 25.00%","3 val(1) 25.00%","4 val(1) 25.00%")
						if 1==s then
							setstate(training3_easy1)
						elseif 2==s then
							setstate(training3_easy2)
						elseif 3==s then
							setstate(training3_easy3)
						elseif 4==s then
							setstate(training3_easy4)
						end
					else
						local s=number(1, 4)
						if 1>=s then -- 25.00% (1/4)
							setstate(training3_easy1)
						elseif 2>=s then -- 25.00% (1/4)
							setstate(training3_easy2)
						elseif 3>=s then -- 25.00% (1/4)
							setstate(training3_easy3)
						elseif 4>=s then -- 25.00% (1/4)
							setstate(training3_easy4)
						end
					end
				end
			else
				say(gameforge.pony_levelup._690_say)
			end
		end
	end
	state need_item50050 begin
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._700_makequestbutton)
			q.set_title(gameforge.pony_levelup._700_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._700_makequestbutton)
			say(gameforge.pony_levelup._710_sayReward)
			setstate(start)
			q.done()
		end
	end
	state failure begin
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._720_makequestbutton)
			q.set_title(gameforge.pony_levelup._720_makequestbutton)
			q.start()
		end
		when button begin
			say_title(gameforge.pony_levelup._720_makequestbutton)
						say_reward(gameforge.pony_levelup._730_sayReward)
						setstate(start)
		end
		when info begin
			say_title(gameforge.pony_levelup._720_makequestbutton)
						say_reward(gameforge.pony_levelup._740_sayReward)
						setstate(start)
		end
	end
	state report begin
		when letter begin
			local v=find_npc_by_vnum(20349)
			if 0==v then
			else
				target.vid("__TARGET__", v, "")
			end
		end
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.horse_upgrade2._230_makequestbutton)
			q.set_title(gameforge.horse_upgrade2._230_makequestbutton)
			q.start()
		end
		when button or info begin
			say_title(gameforge.pony_levelup._750_say)
			say(gameforge.pony_levelup._760_sayReward)
			say_reward(gameforge.pony_levelup._770_sayReward)
		end
		when __TARGET__.target.click begin
			target.delete("__TARGET__")
			say_title(gameforge.horse_exchange_ticket._20_sayTitle)
			say(gameforge.pony_levelup._780_say)
			setstate(reward)
		end
	end
	state reward begin
		when letter begin
			setskin(NOWINDOW)
			makequestbutton(gameforge.pony_levelup._790_makequestbutton)
			q.set_title(gameforge.pony_levelup._790_makequestbutton)
			q.start()
		end
		when button or info begin
			say(gameforge.pony_levelup._790_makequestbutton)
			if horse.get_level()>=11 then
				say(gameforge.pony_levelup._800_say)
			elseif (horse.get_level()>=1 and horse.get_level()<=10) then
				local s=number(1, 2)
				if 1>=s then -- 50.00% (1/2)
					say(gameforge.pony_levelup._810_say)
					pc.setqf("next_time", 0)
				elseif 2>=s then -- 50.00% (1/2)
					say(gameforge.pony_levelup._820_say)
					if pc.countitem("50050")>=1 then
						char_log(0, "PONY_ADVANCE", "BEGIN")
						pc.removeitem("50050", 1)
						char_log(0, "PONY_ADVANCE", "DEC 50050 1")
						horse.unride()
						horse.advance()
						horse.ride()
						char_log(0, "PONY_ADVANCE", "INC horse_advance 1")
						char_log(0, "PONY_ADVANCE", "END")
						say(string.format(gameforge.pony_levelup._830_say, (horse.get_level())))
						if horse.get_level()==10 then
							say(gameforge.pony_levelup._840_say)
							pc.setqf("next_time", 0)
						else
							say(gameforge.pony_levelup._850_say)
						end
					else
						say(gameforge.pony_levelup._860_say)
					end
				end
			end
			setstate(start)
			q.done()
		end
	end
	state __COMPLETE__ begin
		when enter begin
			q.done()
		end
	end
end

